@using AppData.ViewModels.ThongKe
@model ThongKeViewModel
@{
    ViewData["Title"] = "ThongKe";
}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation-vn"></script>
<!-- Favicon icon -->

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="shortcut icon" href="~/ThongKe/assets/images/favicon.png" type="image/x-icon">
<link rel="icon" href="~/ThongKe/assets/images/favicon.ico" type="image/x-icon">

@*<!-- Google font-->
<link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700" rel="stylesheet">*@

<!-- themify -->
<link rel="stylesheet" type="text/css" href="~/ThongKe/assets/icon/themify-icons/themify-icons.css">

<!-- iconfont -->
<link rel="stylesheet" type="text/css" href="~/ThongKe/assets/icon/icofont/css/icofont.css">

<!-- simple line icon -->
<link rel="stylesheet" type="text/css" href="~/ThongKe/assets/icon/simple-line-icons/css/simple-line-icons.css">

<!-- Required Fremwork -->
<link rel="stylesheet" type="text/css" href="~/ThongKe/assets/plugins/bootstrap/css/bootstrap.min.css">

<!-- Chartlist chart css -->
<link rel="stylesheet" href="~/ThongKe/assets/plugins/chartist/dist/chartist.css" type="text/css" media="all">

<!-- Weather css -->
<link href="~/ThongKe/assets/css/svg-weather.css" rel="stylesheet">


<!-- Style.css -->
<link rel="stylesheet" type="text/css" href="~/ThongKe/assets/css/main.css">

<!-- Responsive.css-->
<link rel="stylesheet" type="text/css" href="~/ThongKe/assets/css/responsive.css">

<div class="row">
    <div class="main-header">
        <h4>Thống Kê</h4>
    </div>
</div>
<div class="row dashboard-header">
    <div class="col-lg-4 col-md-6">
        <div class="card dashboard-product">
            <span>Số lượng thành viên</span>
            <h2 class="dashboard-total-products">@Model.SoLuongThanhVien</h2>
            <span class="label label-warning">Sales</span>Arriving Today
            <div class="side-box">
                <i class="ti-signal text-warning-color"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-4 col-md-6">
        <div class="card dashboard-product">
            <span>Số đơn hàng chờ</span>
            <h2 class="dashboard-total-products">@Model.SoLuongDonHang</h2>
            <span class="label label-primary">Views</span>View Today
            <div class="side-box ">
                <i class="ti-gift text-primary-color"></i>
            </div>
        </div>
    </div>
    <div class="col-lg-4 col-md-6">
        <div class="card dashboard-product">
            <span>Số lượng sản phẩm trong kho</span>
            <h2 class="dashboard-total-products"><span>@Model.SoLuongSanPham</span></h2>
            <span class="label label-success">Sales</span>Reviews
            <div class="side-box">
                <i class="ti-direction-alt text-success-color"></i>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="d-flex justify-content-end" style="margin-right:10px;margin-bottom:10px">
        <p style="margin-right:10px">Thời gian:</p><input type="text" id="daterange" value="12/01/2023 - 12/31/2023" class="form-control" style="width:30%;" />
    </div>
    <div class="col-lg-12">
        <div class="card">
            <div class="d-flex justify-content-end">
                <a class="btn btn-success" asp-action="ExportExcel" style="margin-top:10px;margin-right:10px">Xuất file excel</a>
            </div>
            <div class="card-block">
                <canvas id="barChart" class="ct-chart-line " style="width: 100%!important; height: 330px; margin: 0 auto"></canvas>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xl-8 col-lg-12">
        <div class="card" style="height:300px">
            <div class="card-block">
                <canvas id="lineChart" style="min-width: 150px; height: 230px; margin: 0 auto"></canvas>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-lg-12">
        <div class="card" style="height:300px">
            <div class="card-block">
                <canvas id="pieChart" style="width: 250px; height: 250px; margin: 0 auto"></canvas>
            </div>
        </div>
    </div>
</div>
<!-- 2-1 block end -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    var $window = $(window);
    var nav = $('.fixed-button');
    $window.scroll(function () {
        if ($window.scrollTop() >= 200) {
            nav.addClass('active');
        }
        else {
            nav.removeClass('active');
        }
    });
</script>
<!-- Required Jqurey -->
<script src="~/ThongKe/assets/plugins/Jquery/dist/jquery.min.js"></script>
<script src="~/ThongKe/assets/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="~/ThongKe/assets/plugins/tether/dist/js/tether.min.js"></script>

<!-- Required Fremwork -->
<script src="~/ThongKe/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<!-- Scrollbar JS-->
<script src="~/ThongKe/assets/plugins/jquery-slimscroll/jquery.slimscroll.js"></script>
<script src="~/ThongKe/assets/plugins/jquery.nicescroll/jquery.nicescroll.min.js"></script>

<!--classic JS-->
<script src="~/ThongKe/assets/plugins/classie/classie.js"></script>

<!-- notification -->
<script src="~/ThongKe/assets/plugins/notification/js/bootstrap-growl.min.js"></script>

<!-- Sparkline charts -->
<script src="~/ThongKe/assets/plugins/jquery-sparkline/dist/jquery.sparkline.js"></script>

<!-- Counter js  -->
<script src="~/ThongKe/assets/plugins/waypoints/jquery.waypoints.min.js"></script>
<script src="~/ThongKe/assets/plugins/countdown/js/jquery.counterup.js"></script>

<!-- Echart js -->
<script src="~/ThongKe/assets/plugins/charts/echarts/js/echarts-all.js"></script>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>

<!-- custom js -->
<script type="text/javascript" src="~/ThongKe/assets/pages/elements.js"></script>
<script src="/js/site.js"></script>
<script type="text/javascript">
    $(function () {
        $('#daterange').daterangepicker({
            opens: 'left',
            startDate: '@Model.Start',
            endDate: '@Model.End'
        }, function (start, end, label) {
            location.href = "/ThongKe/ThongKeAdmin?startDate=" + start.format('YYYY-MM-DD') + "&endDate=" + end.format('YYYY-MM-DD');
        });
    });
    var labelBars = [];
    var dataBars = [];
    var labelLines = [];
    var dataLines = [];
    var labelPies = [];
    var dataPies = [];
    @{   
        foreach (var x in @Model.BieuDoCot)
        {
            @:labelBars.push('@Html.Raw(x.TenSP)')
            @:dataBars.push(@x.SoLuong)
        }
        foreach (var x in Model.BieuDoDuong)
        {
            @:labelLines.push('@x.Ngay.ToString("MM/dd/yyyy")')
            @:dataLines.push(@x.DoanhThu)
        }
        foreach (var x in Model.BieuDoTron)
        {
            @:labelPies.push('@Html.Raw(x.TrangThaiHoaDon)')
            @:dataPies.push(@x.PhanTram)
        }
    }
        ChartJS.BarChart("barChart", labelBars, dataBars, "Biểu đồ thống kê sản phẩm bán chạy");
    ChartJS.LineChart("lineChart", labelLines, dataLines, "Biểu đồ thống kê doanh thu ");
    ChartJS.PieChart("pieChart", labelPies, dataPies, "Biểu đổ thống kê trạng thái hóa đơn");
</script>



